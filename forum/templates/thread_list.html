{% extends 'base.html' %}

{% load static %}

{% block title %}
Thread List
{% endblock %}

{% block content %}
<h1>Thread List</h1>

{% if user.is_authenticated %}
    {% if user_threads %}
        {# Group user's threads by category #}
        {% regroup user_threads by category as category_groups %}
        {% for group in category_groups %}
            <h3>
                {{ group.grouper.name }}
                {% if group.grouper.description %}
                    <i>({{ group.grouper.description }})</i>
                {% endif %}
            </h3>
                {% for thread in group.list %}
                    <p><a href="{{ thread.get_absolute_url }}">{{ thread.title }}</a></p>
                {% endfor %}
        {% endfor %}
    {% else %}
        <div class="alert alert-info">
            <p>You haven't written any threads yet. Start by creating your first one below!</p>
        </div>
    {% endif %}

    <p>
        <a href="{{ create_thread_url }}" class="btn btn-primary">+ Create New Thread</a>
    </p>
{% else %}
    <p>Please log in to view your threads.</p>
{% endif %}
{% endblock %}